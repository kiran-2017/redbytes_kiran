<?xml version="1.0" encoding="utf-8"?>
<odoo>
      <!-- Inherited sale view to add new fields for Delivery Information-->
        <record id="view_order_form_iv_inherited" model="ir.ui.view">
            <field name="name">view.order.form.inherited</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

              <!-- Show create Invoice button as per stages-->
              <!-- <button name="%(sale.action_view_sale_advance_payment_inv)d" type="action" class="btn-primary"
                  attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}" position="replace">
                  <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice New"
                      type="action" class="btn-primary"
                      attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"/>
              </button> -->

              <!-- <button name="%(sale.action_view_sale_advance_payment_inv)d" type="action" context="{'default_advance_payment_method': 'percentage'}"
                  attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}" position="replace">
                  <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice Before k1"
                      type="action" context="{'default_advance_payment_method': 'percentage'}"
                      attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', 'not in', ('sale','Advance Received','GAD Approved','QAP Approved'))]}"/>
              </button> -->

              <!-- End here-->

            <!-- Rename invoice status to bold -->
            <xpath expr="//group[@name='sale_pay']/field[@name='invoice_status']" position="attributes">
              <attribute name="string">INVOICE STATUS</attribute>
            </xpath>

              <!-- Hide Customer Referace -->
              <xpath expr="//field[@name='partner_id']" position="before">
                <field name="new_revision_so_no" invisible="1"/>
              </xpath>

              <!-- Convert datetime to date for date order field on SO-->
              <xpath expr="//field[@name='date_order']" position="attributes">
                <attribute name="widget">date</attribute>
              </xpath>
              <!-- Convert datetime to date for Confirmation order field on SO-->
              <xpath expr="//field[@name='confirmation_date']" position="attributes">
                <!-- <attribute name="widget">date</attribute> -->
                <attribute name="invisible">1</attribute>
              </xpath>
              <xpath expr="//field[@name='date_order']" position="attributes">
                <attribute name="widget">date</attribute>
              </xpath>

              <!-- Hide Shipping Policy  -->
              <xpath expr="//field[@name='picking_policy']" position="attributes">
                <attribute name="invisible">1</attribute>
              </xpath>
              <!-- rename invoice status -->
              <!-- <xpath expr="//field[@name='invoice_status']" position="attributes">
                <attribute name="string">Invoice Status</attribute>
              </xpath> -->

              <!-- rename invoice status -->
              <xpath expr="//field[@name='origin']" position="attributes">
                <attribute name="string">SOURCE DOCUMENT</attribute>
              </xpath>

              <!-- rename user id  -->
              <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="string">SALESPERSON</attribute>
              </xpath>

              <!-- rename team id  -->
              <xpath expr="//field[@name='team_id']" position="attributes">
                <attribute name="string"> SALES TEAM</attribute>
              </xpath>

              <!-- rename CLIENT ORDER REF -->
              <xpath expr="//field[@name='client_order_ref']" position="attributes">
                <attribute name="string">CUSTOMER REFERENCE</attribute>
              </xpath>

              <!-- rename warehouse id -->
              <xpath expr="//field[@name='warehouse_id']" position="attributes">
                <attribute name="string">WAREHOUSE</attribute>
              </xpath>

              <!-- Hide Expiration date -->
              <xpath expr="//field[@name='validity_date']" position="attributes">
                <attribute name="invisible">1</attribute>
              </xpath>

              <xpath expr="//field[@name='confirmation_date']" position="after">
                <!-- Logic to change date color to red if delivery date is getting expire and out of date -->
                <!-- this is Boolean field only for field visibility-->
                <field name="check_for_delivery_date" invisible="1"/>
                <label for="delivery_date" string="Delivery Date" attrs="{'invisible': [('check_for_delivery_date','=',True)]}"/>
                <field name="delivery_date" nolabel="1" attrs="{'invisible': [('check_for_delivery_date','=',True)]}"/>
                <label for="old_delivery_date" string="Delivery Date" style="color:red;" attrs="{'invisible': [('check_for_delivery_date','=',False)]}"/>
                <field name="old_delivery_date" style="color:red;" nolabel="1" attrs="{'invisible': [('check_for_delivery_date','=',False)]}"/>
                <!-- End Here-->
              </xpath>

              <xpath expr="//field[@name='partner_id']" position="after">
                <field name="iv_project_id"/>
              </xpath>

              <!-- Hide payment term form top part of SO-->
              <xpath expr="//field[@name='payment_term_id']" position="attributes">
                <attribute name="invisible">1</attribute>
              </xpath>

              <!-- Add payment term to commertial group-->
              <xpath expr="//field[@name='incoterm']" position="after">
                  <field name="payment_term_id" string="PAYMENT TERMS"/>
              </xpath>

              <xpath expr="//group[@name='sales_person']" position="attributes">
                  <attribute name="string"> SALES INFORMATION</attribute>
              </xpath>

              <xpath expr="//group[@name='sale_pay']" position="attributes">
                  <attribute name="string">INVOICING</attribute>
              </xpath>

              <xpath expr="//group[@name='technical']" position="attributes">
                  <attribute name="string">REPORTING</attribute>
              </xpath>

              <!-- Add new group under other information for delivery info -->
              <xpath expr="//group[@name='sales_person']" position="after">
                  <group string="DELIVERY" name="delivery_info" colspan="4" cols="4">
                    <group>
                      <field name="delivery"/>
                      <field name="freight"/>
                    </group>
                    <group>
                      <field name="insurance"/>
                      <field name="transporter"/>
                    </group>
                    <group>
                      <field name="performance_guarantee"/>
                      <field name="delivery_instructions"/>
                    </group>
                    <group>
                      <field name="mode_of_shipment"/>
                      <!-- <field name="picking_policy" string="SHIPPING POLICY"/> -->
                      <field name="shipping_policy" string="SHIPPING POLICY"/>
                    </group>
                    <group>
                      <label for="delivery_text_instruction" string="DELIVERY INSTRUCTION"/>
                      <strong><field name="delivery_text_instruction" style="border-color:red;color:red;" string="Delivery Instruction" nolabel="1"/></strong>
                    </group>
                  </group>

                  <group string="GAD" name="delivery_info">
                    <field name="is_gad" widget="radio" options="{'horizontal': true}"/>
                    <field name="is_adv" invisible="1"/>
                  </group>
                </xpath>

                <!-- Hide address from customer name -->
                <xpath expr="//field[@name='partner_id']" position="attributes">
                  <attribute name="context">{'search_default_customer':1, 'show_address': 0}</attribute>
                </xpath>

                <!-- To rename page name -->
                <xpath expr="//notebook/page" position="attributes">
                    <attribute name="string">VALVE LIST</attribute>
                </xpath>

                <xpath expr="//field[@name='order_line']" position="before">
                    <group col="4" colspan="4">
                        <field name="inspection"/>
                        <field name="painting"/>
                        <field name="flange_drilling"/>
                        <field name="packing"/>
                        <field name="material_standard"/>
                        <field name="special_mfg_instruction"/>
                        <field name="agency_name" attrs="{'invisible': [('inspection','=','NO')], 'required': [('inspection','=','YES')]}"/>
                    </group>
                </xpath>

                <!-- Set domain to order lines Need to work for this -->
                <xpath expr="//field[@name='order_line']" position="attributes">
                  <attribute name="domain">[('product_id','=',52)]</attribute>
                </xpath>



                <!-- <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']" position="attributes">
                  <attribute name="attrs">{'invisible': [('product_uom_qty','=',0)]}</attribute>
                </xpath>

                <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="attributes">
                  <attribute name="attrs">{'invisible': [('product_uom_qty','=',0)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='discount']" position="attributes">
                  <attribute name="attrs">{'invisible': [('product_uom_qty','=',0)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='tax_id']" position="attributes">
                  <attribute name="attrs">{'invisible': [('product_uom_qty','=',0)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='price_subtotal']" position="attributes">
                  <attribute name="attrs">{'invisible': [('product_uom_qty','=',0)]}</attribute>
                </xpath> -->



                <!-- Add new fields in sale order line tree view -->
                <xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="after">
                  <field name="size" string="Size(mm)"/>
                  <field name="moc"/>
                  <field name="operation"/>
                  <field name="pn"/>
                  <field name="down_payment_active" invisible="1"/>
                </xpath>

                <!-- Add new fields in sale order line  form view -->
                <xpath expr="//field[@name='order_line']/form/group/group/field[@name='product_id']" position="after">
                    <field name="size" string="Size(mm)"/>
                    <field name="moc"/>
                    <field name="operation"/>
                    <field name="pn"/>
                    <!-- <field name="down_payment_active"/> -->
                </xpath>



                <!-- keep for future <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']" position="after">
                    <field name="line_delivery_date"/>
                </xpath> -->

                <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="attributes">
                    <attribute name="string">Rate(₹)</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']" position="attributes">
                    <attribute name="string">Qty</attribute>
                </xpath>

                <xpath expr="//field[@name='order_line']/tree/field[@name='price_subtotal']" position="attributes">
                    <attribute name="string">Amount</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='qty_delivered']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='qty_invoiced']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- Add stages and buttons for ORDER STATUS-->
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="statusbar_visible">draft,sent,sale</attribute>
                </xpath>
                <button name="action_quotation_send" type="object" states="sent,sale" position="replace">
                  <button name="action_quotation_send" string="Send by Email" type="object" states="sent,sale" invisible="1"/>
                </button>
                <!-- <xpath expr="//button[@name='action_quotation_send']" position="attributes">
                    <attribute name="states">draft</attribute>
                </xpath> -->

                <xpath expr="//button[@name='action_quotation_send']" position="attributes">
                    <attribute name="states">draft</attribute>
                </xpath>
                <!-- <xpath expr="//button[@name='print_quotation']" position="attributes">
                    <attribute name="states">Advance Received,GAD Approved,QAP Approved</attribute>
                </xpath> -->
                <xpath expr="//button[@name='action_confirm']" position="attributes">
                    <attribute name="states">sent</attribute>
                </xpath>
                <xpath expr="//button[@name='action_cancel']" position="attributes">
                    <attribute name="states">sale,sent,draft</attribute>
                </xpath>
                <!-- <xpath expr="//button[@name='action_done']" position="attributes">
                    <attribute name="states">Advance Received,GAD Approved,QAP Approved</attribute>
                </xpath> -->

                <!-- <xpath expr="//button[@name='action_confirm']" position="before">
                    <button name="rfq_received" states="draft,sent" string="RFQ Received" class="btn-primary" type="object" />
                </xpath> -->
                <xpath expr="//button[@name='action_confirm']" position="after">
                    <button name="revise_so" confirm="Are you sure you want to Revise Sale Order?" states="sale,sent" string="Revise SO" class="btn-primary" type="object"/>
                    <button name="sent_revise_so" states="sale,sent" string="Send by Email" class="btn-primary" type="object"/>
                    <!-- confirm="Are you sure you want to send Revise Sale Order?"-->
                    <!-- <button name="create_advance_received" string="Advance Received" class="btn-primary" type="object" attrs="{'invisible': [('is_adv','in',('N','NA'))]}"/> -->
                    <!-- Hide for now not required -->
                    <!-- <button name="gad_approved" string="GAD Approved" class="btn-primary" type="object" attrs="{'invisible': [('is_gad','in',('N','NA'))]}"/> -->
                    <!-- <button name="create_qap_approved" states="sale" string="QAP Approved" class="btn-primary" type="object"/> -->
                    <button name="create_payment_received" states="sale" string="Payments" class="btn-primary" type="object"/>
                </xpath>

                <xpath expr="//notebook/page[@name='other_information']" position="attributes">
                    <attribute name="string">DELIVERY+COMMERCIAL</attribute>
                </xpath>

                <!-- Add ORDER STATUS page to sale view-->
                <xpath expr="//page" position="after">
                  <page string="ORDER STATUS" name="iv_order_status">
                    <group>
                      <!-- Maintain status in customer PO lines no need to create extra records -->
                        <!-- <group string="RFQ Received">
                            <field name="rfq_received_date" class="oe_inline" readonly="1"/>
                            <field name="rfq_received_by" class="oe_inline" readonly="1"/>
                        </group> -->


                        <!-- no need for now merge with Customer PO Received Lines <group string="Order Accepted">
                            <field name="order_accepted" class="oe_inline" readonly="1"/>
                            <field name="order_accepted_date" class="oe_inline" readonly="1" attrs="{'invisible': [('order_accepted','=','N')]}"/>
                            <field name="order_accepted_by" class="oe_inline" readonly="1" attrs="{'invisible': [('order_accepted','=','N')]}"/>
                        </group> -->

                        <!-- <group string="Advance Received">
                            <field name="advance_received" class="oe_inline" readonly="1"/>
                            <field name="advance_received_date" class="oe_inline" readonly="1" attrs="{'invisible': [('advance_received','in',('N','NA'))]}"/>
                            <field name="advance_received_by" class="oe_inline" readonly="1" attrs="{'invisible': [('advance_received','in',('N','NA'))]}"/>
                            <field name="advance_received_amount_inr" class="oe_inline" attrs="{'invisible': [('advance_received','in',('N','NA'))]}"/>
                            <field name="advance_received_per" class="oe_inline" attrs="{'invisible': [('advance_received','in',('N','NA'))]}"/>
                        </group> -->

                        <!-- Use in phase 3 keep it hide for now
                          <group string="GA Drawing Ready">
                              <field name="ga_drawing_ready" class="oe_inline"/>
                              <field name="ga_drawing_ready_date" class="oe_inline"/>
                              <field name="ga_drawing_ready_by" class="oe_inline"/>
                          </group>

                          <group string="GA Drawing Sent">
                              <field name="ga_drawing_sent" class="oe_inline"/>
                              <field name="ga_drawing_sent_date" class="oe_inline"/>
                              <field name="ga_drawing_sent_by" class="oe_inline"/>
                          </group>

                      -->

                      <!-- <group string="GA Drawing Approved">
                          <field name="ga_drawing_approved" class="oe_inline" readonly="1"/>
                          <field name="ga_drawing_approved_date" class="oe_inline" readonly="1" attrs="{'invisible': [('ga_drawing_approved','in',('N','NA'))]}"/>
                          <field name="ga_drawing_approved_by" class="oe_inline" readonly="1" attrs="{'invisible': [('ga_drawing_approved','in',('N','NA'))]}"/>
                      </group> -->

                      <!-- use in phase 3
                      <group string="QAP Sent">
                          <field name="qap_sent" class="oe_inline"/>
                          <field name="qap_sent_date" class="oe_inline"/>
                          <field name="qap_sent_by" class="oe_inline"/>
                      </group>
                      -->

                      <!-- <group string="QAP Approved">
                          <field name="qap_approved" class="oe_inline" readonly="1"/>
                          <field name="qap_approved_date" class="oe_inline" readonly="1" attrs="{'invisible': [('qap_approved','in',('N','NA'))]}"/>
                          <field name="qap_approved_by" class="oe_inline" readonly="1" attrs="{'invisible': [('qap_approved','in',('N','NA'))]}"/>
                      </group> -->

                      <group string="Order Completed">
                          <field name="order_completed" class="oe_inline" readonly="0"/>
                          <field name="order_completed_date" class="oe_inline" readonly="0" attrs="{'invisible': [('order_completed','=','N')]}"/>
                          <field name="order_completed_by" class="oe_inline" readonly="0" attrs="{'invisible': [('order_completed','=','N')]}"/>
                      </group>

                      <group string="Order Cancelled">
                          <field name="order_cancelled" class="oe_inline" readonly="1"/>
                          <field name="order_cancelled_date" class="oe_inline" readonly="1" attrs="{'invisible': [('order_cancelled','=','N')]}"/>
                          <field name="order_cancelled_by" class="oe_inline" readonly="1" attrs="{'invisible': [('order_cancelled','=','N')]}"/>
                      </group>

                      <!-- <group string="Manufacturing Order Issued">

                      </group> -->
                    </group>



                    <group col="2" colspan="2">
                        <group string="RFQ Received">
                           <div class="horizontalgap" style="width:405px">
                              <field name="rfq_received_lines" nolabel="1" readonly="1">
                                <tree editable="bottom">
                                    <field name="rfq_received_date"/>
                                    <field name="rfq_received_by"/>
                                    <field name="sale_order_id" invisible="1"/>
                                </tree>
                              </field>
                            </div>
                        </group>
                        <group string="Quotation Sent">
                          <div class="horizontalgap" style="width:405px">
                            <field name="quotation_sent_line_ids" nolabel="1" readonly="1">
                              <tree editable="bottom">
                                  <field name="quotation_sent_date"/>
                                  <field name="quotation_sent_by"/>
                                  <field name="quotation_sent_no" />
                                  <field name="sale_order_id" invisible="1"/>
                              </tree>
                            </field>
                          </div>
                        </group>
                    </group>

                    <group col="2" colspan="2">
                      <group string="Customer PO Received">
                        <div class="horizontalgap" style="width:405px">
                          <field name="customer_po_received_line_ids" nolabel="1" readonly="1">
                            <tree editable="bottom">
                                <field name="customer_po_received_date"/>
                                <field name="customer_po_received_by"/>
                                <field name="customer_po_received_no"/>
                                <field name="order_state"/>
                                <field name="sale_order_id" invisible="1"/>
                            </tree>
                          </field>
                        </div>
                      </group>

                      <group string="Order Accepted">
                        <div class="horizontalgap" style="width:405px">
                          <field name="order_accepted_lines" nolabel="1" readonly="1">
                            <tree editable="bottom">
                                <field name="order_accepted_date"/>
                                <field name="order_accepted_by"/>
                                <field name="order_accepted"/>
                                <field name="sale_order_id" invisible="1"/>
                            </tree>
                          </field>
                        </div>
                      </group>
                  </group>



                  <group col="2" colspan="2">
                    <group string="GA Drawing Ready">
                      <div class="horizontalgap" style="width:405px">
                        <field name="ga_drawing_ready_lines" nolabel="1" readonly="1">
                          <tree editable="bottom">
                              <field name="ga_drawing_ready_date"/>
                              <field name="ga_drawing_ready_by"/>
                              <field name="ga_drawing_ready"/>
                              <field name="sale_order_id" invisible="1"/>
                          </tree>
                        </field>
                      </div>
                    </group>

                    <group string="GA Drawing Sent">
                      <div class="horizontalgap" style="width:405px">
                        <field name="ga_drawing_sent_lines" nolabel="1" readonly="1">
                          <tree editable="bottom">
                              <field name="ga_drawing_sent_date"/>
                              <field name="ga_drawing_sent_by"/>
                              <field name="ga_drawing_sent"/>
                              <field name="sale_order_id" invisible="1"/>
                          </tree>
                        </field>
                      </div>
                    </group>
                </group>

                <group col="1" colspan="1">
                  <group string="QAP Sent">
                    <!-- <div class="horizontalgap" style="width:405px"> -->
                      <field name="qap_sent_lines" nolabel="1" readonly="1">
                        <tree editable="bottom">
                            <field name="qap_sent_date"/>
                            <field name="qap_sent_by"/>
                            <field name="qap_sent"/>
                            <field name="sale_order_id" invisible="1"/>
                        </tree>
                      </field>
                    <!-- </div> -->
                  </group>
                </group>




                    <group col="2" colspan="2">
                        <group string="GA Drawing Approved">
                          <div class="horizontalgap" style="width:405px">
                            <field name="gad_approved_lines" nolabel="1" readonly="1">
                              <tree editable="bottom">
                                  <field name="ga_drawing_approved_date"/>
                                  <field name="ga_drawing_approved_by"/>
                                  <field name='ga_drawing_approved'/>
                                  <field name="sale_order_id" invisible="1"/>
                              </tree>
                            </field>
                          </div>
                        </group>
                        <group string="QAP Approved">
                          <div class="horizontalgap" style="width:405px">
                              <field name="qap_approved_lines" nolabel="1" readonly="1">
                                <tree editable="bottom">
                                    <field name="qap_approved_date"/>
                                    <field name="qap_approved_by"/>
                                    <field name='qap_approved'/>
                                    <field name="sale_order_id" invisible="1"/>
                                </tree>
                              </field>
                            </div>
                        </group>
                    </group>




                  <group col="2" colspan="2">
                      <group string="Manufacturing Order Issued">
                        <div class="horizontalgap" style="width:405px">
                          <field name="mo_issued_lines" string="Manufacturing Order Issued" class="oe_inline" nolabel="1" readonly="1">
                            <tree editable="bottom">
                                <!-- <field name="mo_issued"/> -->
                                <field name="mo_issued_date"/>
                                <field name="mo_issued_by"/>
                                <field name="mo_issued_no" />
                                <field name="mo_production_completed"/>
                                <field name="mo_date" widget="date"/>
                                <field name="sale_order_id" invisible="1"/>
                            </tree>
                          </field>
                        </div>
                      </group>

                      <group string="PO Sent">
                        <div class="horizontalgap" style="width:405px">
                          <field name="po_sent_lines" string="PO Sent" class="oe_inline" nolabel="1" readonly="1">
                            <tree editable="bottom">
                                <field name="po_sent_no"/>
                                <field name="vendor_id"/>
                                <field name="po_sent_date"/>
                                <field name="po_sent_by"/>
                                <field name="sale_order_id" invisible="1"/>
                                <field name="purchase_id" invisible="1"/>
                            </tree>
                          </field>
                        </div>
                      </group>
                    </group>

                    <group col="1" colspan="1">
                      <group string="Raw Materials Received">
                        <!-- <div class="horizontalgap" style="width:405px"> -->
                          <field name="raw_material_received_lines" class="oe_inline" nolabel="1" readonly="1">
                            <tree editable="bottom">
                                <field name="raw_material_received_no"/>
                                <field name="raw_material_received_date"/>
                                <field name="raw_material_received_by"/>
                                <field name="raw_material_received"/>
                                <field name="purchase_id"/>
                                <field name="sale_order_id" invisible="1"/>
                                <field name="incoming_pick_id" invisible="1"/>
                            </tree>
                          </field>
                        <!-- </div> -->
                      </group>

                      <group col="2" colspan="2">
                          <group string="TPI Call Issued">
                            <div class="horizontalgap" style="width:405px">
                              <field name="tpi_call_issued_lines" string="TPI Call Issued" class="oe_inline" nolabel="1" readonly="1">
                                <tree editable="bottom">
                                    <!-- <field name="mo_issued"/> -->
                                    <field name="tpi_call_issued_date"/>
                                    <field name="tpi_call_issued_by"/>
                                    <field name="tpi_call_issued" />
                                    <field name="sale_order_id" invisible="1"/>
                                </tree>
                              </field>
                            </div>
                          </group>

                          <group string="TPI Completed">
                            <div class="horizontalgap" style="width:405px">
                              <field name="tpi_completed_lines" string="TPI Completed" class="oe_inline" nolabel="1" readonly="1">
                                <tree editable="bottom">
                                    <!-- <field name="mo_issued"/> -->
                                    <field name="tpi_completed_date"/>
                                    <field name="tpi_completed_by"/>
                                    <field name="tpi_completed" />
                                    <field name="sale_order_id" invisible="1"/>
                                </tree>
                              </field>
                            </div>
                          </group>
                      </group>

                    <!-- <group string="MO Production Completed">
                      <field name="mo_production_completed_lines" class="oe_inline" nolabel="1" readonly="1">
                        <tree editable="bottom">
                            <field name="mo_production_completed"/>
                            <field name="mo_production_completed_date"/>
                            <field name="mo_production_completed_by"/>
                            <field name="mo_production_completed_mo_no" />
                            <field name="sale_order_id" invisible="1"/>
                        </tree>
                      </field>
                    </group> -->

                    <group string="Payment Received">
                      <field name="payment_received_lines" class="oe_inline" nolabel="1" readonly="1">
                        <tree editable="bottom">
                            <field name="payment_received_no"/>
                            <field name="payment_received_date"/>
                            <field name="payment_received_by"/>
                            <field name="payment_received_amt_inr" />
                            <field name="payment_received_amt_per" />
                            <field name="sale_order_id" invisible="1"/>
                        </tree>
                      </field>
                    </group>
                  </group>

                    <group string="Dispatch">
                      <field name="dispatch_lines" class="oe_inline" nolabel="1" readonly="1">
                        <tree editable="bottom">
                            <field name="dispatch_dc_no" />
                            <field name="dispatch_date"/>
                            <field name="dispatch_by"/>
                            <field name="dispatch_state"/>
                            <field name="sale_order_id" invisible="1"/>
                        </tree>
                      </field>
                    </group>



                   </page>
                   <!-- DOCUMENTS -->
                   <page string="DOCUMENTS" name="iv_documents">
                         <!-- need add fields here -->
                           <field name="document_lines" nolabel="1">
                             <tree editable="bottom">
                                <field name="document_type" required="1"/>
                                <field name="document_date" required="1"/>
                                <field name="document_no"/>
                                <field name="document_filename" invisible="1"/>
                                <field name="document_attachment" filename="document_filename"/>
                             </tree>
                           </field>
                        <!-- <group string="ERP">
                          <field name="erp_docs_lines" nolabel="1">
                            <tree editable="bottom">
                               <field name="quote_date"/>
                               <field name="quote_no"/>
                               <field name="order_acc_date"/>
                               <field name="order_acc_no"/>
                               <field name="tpi_call_date"/>
                               <field name="test_cert_date"/>
                               <field name="delivery_challan_date"/>
                               <field name="delivery_challan_no"/>
                               <field name="invoice_date"/>
                               <field name="invoice_no"/>
                               <field name="warr_certificate"/>
                            </tree>
                          </field>
                       </group>

                       <group string="IV USER">
                         <field name="iv_user_docs_lines" nolabel="1">
                           <tree editable="bottom">
                              <field name="ga_drawing_phase3"/>
                              <field name="qa_plan_date_phase3"/>
                           </tree>
                         </field>
                      </group> -->
                    </page>
                </xpath>
                <!-- Hide Fiscal Position -->
                <xpath expr="//field[@name='fiscal_position_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

            </field>
        </record>

        <!-- Inherited sale stock view to add new fields-->
          <record id="view_order_form_inherit_sale_stock_iv_inherited" model="ir.ui.view">
              <field name="name">view.order.form.inherited</field>
              <field name="model">sale.order</field>
              <field name="inherit_id" ref="sale_stock.view_order_form_inherit_sale_stock"/>
              <field name="arch" type="xml">

                  <!-- Rename Shipping Information to COMMERCIAL-->
                  <xpath expr="//group[@name='sale_shipping']" position="attributes">
                    <attribute name="string">COMMERCIAL</attribute>
                  </xpath>
                  <!-- Hide Warehouse id -->
                  <xpath expr="//field[@name='warehouse_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                  </xpath>
                  <!-- to rename incoterm string to price -->
                  <xpath expr="//field[@name='incoterm']" position="attributes">
                    <attribute name="string">PRICE</attribute>
                  </xpath>
                  <!-- to add new things  -->
                  <xpath expr="//field[@name='picking_policy']" position="after">
                      <field name="advance_bg_required"/>
                      <field name="advance_bg_details" attrs="{'invisible': [('advance_bg_required','in',('NO','BLANK'))], 'required': [('advance_bg_required','=','YES')]}"/>
                      <field name="warranty"/>
                  </xpath>


              </field>
          </record>

          <record id="view_order_tree_inherited" model="ir.ui.view">
              <field name="model">sale.order</field>
              <field name="inherit_id" ref="sale.view_order_tree"/>
              <field name="arch" type="xml">
                  <!-- Change tree view color for sale order as per delivery date -->
                  <xpath expr="//tree" position="attributes">
                    <attribute name="colors">red:check_for_delivery_date==True</attribute>
                  </xpath>

                  <xpath expr="//field[@name='date_order']" position="after">
                    <!-- Add field to change line color to red -->
                    <field name="check_for_delivery_date" invisible="1"/>
                    <field name="delivery_date"/>
                  </xpath>
                  <!-- Convert date order to date field -->
                  <xpath expr="//field[@name='date_order']" position="attributes">
                    <attribute name="widget">date</attribute>
                  </xpath>
                  <!-- Add GAD and ADvance in list view -->
                  <xpath expr="//field[@name='invoice_status']" position="after">
                    <field name="is_gad"/>
                    <field name="is_adv"/>
                  </xpath>

              </field>
          </record>
          <!-- Action menu Inherit to add send mail functionality -->

          <!-- <act_window id="action_sale_order_doc_gad_sent_by_mail"
            multi="True"
            key2="client_action_multi" name="GAD Sent By Mail"
            res_model="mail.compose.message" src_model="sale.order"
            view_mode="form" target="new" view_type="form"
        /> -->

          <!-- <record id="action_gad_sent_by_mail" model="ir.actions.act_window">
              <field name="name">Sent GAD By Mail</field>
              <field name="type">ir.actions.act_window</field>
              <field name="res_model">mail.compose.message</field>
              <field name="view_type">form</field>
              <field name="view_id" ref="IV_sales.email_template_edi_sale_revised"/>
              <field name="view_type">form</field>
          </record>

          <record id="menu_gad_sent_by_mail" model="ir.values">
              <field eval="'client_action_multi'" name="key2"/>
              <field eval="'sale.order'" name="model"/>
              <field name="name">Sent GAD By Mail</field>
              <field name="target">new</field>
              <field eval="'ir.actions.act_window,'+str(action_gad_sent_by_mail)" name="value"/>
          </record> -->

          <!-- <record id="action_gad_sent_by_mail" model="ir.actions.server">
            <field name="name">Sent GAD By Mail</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="state">code</field>
            <field name="code">action = self.sent_revise_so()</field>
        </record>

        <record id="menu_gad_sent_by_mail" model="ir.values">
            <field eval="'client_action_multi'" name="key2"/>
            <field eval="'sale.order'" name="model"/>
            <field name="name">Sent GAD By Mail</field>
            <field eval="'ir.actions.server,%d'%action_gad_sent_by_mail" name="value"/>
        </record> -->






</odoo>
